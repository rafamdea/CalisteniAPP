<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Admin - AuraCalistenia</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Space+Grotesk:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="/styles.css?v=20260225-8">
  </head>
  <body class="admin-body">
    <div class="noise" aria-hidden="true"></div>
    <header class="nav">
      <div class="nav-inner">
        <nav class="nav-group nav-left"></nav>
        <a class="nav-brand" href="/admin?admin_section=inicio" aria-label="AuraCalistenia">
          <span class="brand-mark" aria-hidden="true"></span>
        </a>
        <nav class="nav-group nav-right">
          <a href="/admin?admin_section=inicio" data-admin-section-link="inicio">Inicio</a>
          <a href="/">Página principal</a>
          <a href="/admin?admin_section=portal" data-admin-section-link="portal">Portal del alumno</a>
          <form class="nav-logout-form" action="/admin/logout" method="post">
            <button class="btn nav-logout-btn" type="submit">Cerrar sesión</button>
          </form>
        </nav>
        <nav class="nav-group nav-compact" aria-label="Navegación">
          <a href="/admin?admin_section=inicio" data-admin-section-link="inicio">Inicio</a>
          <a href="/">Página principal</a>
          <a href="/admin?admin_section=portal" data-admin-section-link="portal">Portal del alumno</a>
          <form class="nav-logout-form" action="/admin/logout" method="post">
            <button class="btn nav-logout-btn" type="submit">Cerrar sesión</button>
          </form>
        </nav>
      </div>
    </header>

    <main class="section">
      <div class="container admin-header" data-stagger>
        <p class="eyebrow">Panel admin</p>
        <h1>Control total de AuraCalistenia</h1>
        {{ADMIN_MESSAGE}}
      </div>

      <div class="container admin-section-tabs" id="admin_section_tabs">
        <button class="admin-section-tab is-active" type="button" data-admin-section="inicio">Inicio</button>
        <button class="admin-section-tab" type="button" data-admin-section="portal">Portal del alumno</button>
      </div>

      <div class="container admin-stack admin-section-panel" data-admin-section-panel="inicio">
        {{CONTENT_FORM}}

        <div class="admin-grid">
          <div class="admin-card glass-card">
            <details class="admin-collapsible admin-main-collapsible" open>
              <summary class="admin-collapsible-summary admin-main-summary">
                <div class="admin-collapsible-main">
                  <strong>Agregar competición</strong>
                  <span>Crea una nueva fecha de calendario</span>
                </div>
                <span class="admin-collapsible-tag">Formulario</span>
              </summary>
              <div class="admin-collapsible-content">
                <form class="admin-form" action="/admin/events/add" method="post">
                  <div class="form-field">
                    <label for="event_title">Título</label>
                    <input id="event_title" name="title" type="text" required>
                  </div>
                  <div class="form-row">
                    <div class="form-field">
                      <label for="event_date">Fecha</label>
                      <input id="event_date" name="date" type="text" placeholder="Ej: 16-19 ABR 2026" required>
                    </div>
                    <div class="form-field">
                      <label for="event_location">Lugar</label>
                      <input id="event_location" name="location" type="text" placeholder="Ciudad, País" required>
                    </div>
                  </div>
                  <div class="form-field">
                    <label for="event_desc">Descripción</label>
                    <input id="event_desc" name="description" type="text" required>
                  </div>
                  <div class="form-field">
                    <label for="event_tag">Etiqueta</label>
                    <input id="event_tag" name="tag" type="text" placeholder="Nacional o Europa" required>
                  </div>
                  <button class="btn glass primary" type="submit">Guardar competición</button>
                </form>
              </div>
            </details>
          </div>

          <div class="admin-card glass-card">
            <details class="admin-collapsible admin-main-collapsible">
              <summary class="admin-collapsible-summary admin-main-summary">
                <div class="admin-collapsible-main">
                  <strong>Competiciones actuales</strong>
                  <span>Editar, ordenar y borrar</span>
                </div>
                <span class="admin-collapsible-tag">Listado</span>
              </summary>
              <div class="admin-collapsible-content">
                <ul class="admin-list admin-list-compact">
                  {{EVENT_LIST}}
                </ul>
              </div>
            </details>
          </div>

          <div class="admin-card glass-card">
            <details class="admin-collapsible admin-main-collapsible">
              <summary class="admin-collapsible-summary admin-main-summary">
                <div class="admin-collapsible-main">
                  <strong>Agregar vídeo o foto</strong>
                  <span>Subir archivo o URL externa</span>
                </div>
                <span class="admin-collapsible-tag">Media</span>
              </summary>
              <div class="admin-collapsible-content">
                <form class="admin-form" action="/admin/videos/add" method="post" enctype="multipart/form-data">
                  <div class="form-field">
                    <label for="video_title">Título</label>
                    <input id="video_title" name="title" type="text" required>
                  </div>
                  <div class="form-row">
                    <div class="form-field">
                      <label for="video_tag">Etiqueta</label>
                      <input id="video_tag" name="tag" type="text" required>
                    </div>
                    <div class="form-field">
                      <label for="video_layout">Diseño</label>
                      <select id="video_layout" name="layout">
                        <option value="">Normal</option>
                        <option value="tall">Tall</option>
                        <option value="wide">Wide</option>
                      </select>
                    </div>
                  </div>
                  <div class="form-field">
                    <label for="video_desc">Descripción</label>
                    <input id="video_desc" name="description" type="text" required>
                  </div>
                  <div class="form-field">
                    <label for="video_url">URL externa (opcional)</label>
                    <input id="video_url" name="video_url" type="url" placeholder="https://">
                  </div>
                  <div class="form-field">
                    <label for="video_file">Subir archivo (mp4, webm, ogg, jpg, png, webp)</label>
                    <input id="video_file" name="video_file" type="file" accept="video/mp4,video/webm,video/ogg,image/png,image/jpeg,image/webp">
                  </div>
                  <button class="btn glass primary" type="submit">Guardar vídeo/foto</button>
                </form>
                <p class="admin-note">Si no subes archivo, se mostrará placeholder con el enlace externo.</p>
              </div>
            </details>
          </div>

          <div class="admin-card glass-card">
            <details class="admin-collapsible admin-main-collapsible">
              <summary class="admin-collapsible-summary admin-main-summary">
                <div class="admin-collapsible-main">
                  <strong>Vídeos y fotos actuales</strong>
                  <span>Filtrar, editar, ordenar y borrar</span>
                </div>
                <span class="admin-collapsible-tag">Listado</span>
              </summary>
              <div class="admin-collapsible-content">
                <div class="form-field">
                  <label for="video_admin_search">Buscar vídeo/foto</label>
                  <input id="video_admin_search" type="text" placeholder="Filtrar por título, etiqueta o texto...">
                </div>
                <ul class="admin-list admin-list-compact">
                  {{VIDEO_LIST}}
                </ul>
              </div>
            </details>
          </div>

          <div class="admin-card glass-card">
            <details class="admin-collapsible admin-main-collapsible" open>
              <summary class="admin-collapsible-summary admin-main-summary">
                <div class="admin-collapsible-main">
                  <strong>Correo SMTP por Render</strong>
                  <span>Configurado por variables de entorno, no desde este panel</span>
                </div>
                <span class="admin-collapsible-tag">Seguridad</span>
              </summary>
              <div class="admin-collapsible-content">
                <p class="admin-note">Define estas variables en Render y rota ahí tu contraseña de aplicación Gmail:</p>
                <code>AURA_SMTP_ENABLED=true</code>
                <code>AURA_SMTP_HOST=smtp.gmail.com</code>
                <code>AURA_SMTP_PORT=587</code>
                <code>AURA_SMTP_USER=tu_correo@gmail.com</code>
                <code>AURA_SMTP_PASS=tu_password_de_aplicacion</code>
                <code>AURA_SMTP_FROM=AuraCalistenia</code>
                <code>AURA_SMTP_ADMIN=tu_correo@gmail.com</code>
                <code>AURA_SMTP_TLS=true</code>
                <code>AURA_REQUIRE_DB=true</code>
                <p class="admin-note">Cada vez que la cambies en Render, redeploy y queda activa sin guardarse en la base de datos.</p>
              </div>
            </details>
          </div>
        </div>
      </div>

      <div class="container admin-stack admin-section-panel" data-admin-section-panel="portal" hidden>
        {{COACH_DASHBOARD}}
        {{PLAN_EDITOR}}

        <div class="admin-grid">
          <div class="admin-card glass-card">
            <details class="admin-collapsible admin-main-collapsible" open>
              <summary class="admin-collapsible-summary admin-main-summary">
                <div class="admin-collapsible-main">
                  <strong>Crear alumno</strong>
                  <span>Alta manual y activación inmediata</span>
                </div>
                <span class="admin-collapsible-tag">Formulario</span>
              </summary>
              <div class="admin-collapsible-content">
                <form class="admin-form" action="/admin/clients/add" method="post">
                  <div class="form-row">
                    <div class="form-field">
                      <label for="client_username">Usuario</label>
                      <input id="client_username" name="client_username" type="text" required>
                    </div>
                    <div class="form-field">
                      <label for="client_password">Contraseña</label>
                      <input id="client_password" name="client_password" type="password" required>
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-field">
                      <label for="client_email">Email</label>
                      <input id="client_email" name="client_email" type="email" required>
                    </div>
                    <div class="form-field">
                      <label for="client_skill">Skill</label>
                      <input id="client_skill" name="client_skill" type="text">
                    </div>
                  </div>
                  <div class="form-row">
                    <div class="form-field">
                      <label for="client_level">Nivel</label>
                      <input id="client_level" name="client_level" type="text">
                    </div>
                    <div class="form-field">
                      <label for="client_goal">Objetivo</label>
                      <input id="client_goal" name="client_goal" type="text">
                    </div>
                  </div>
                  <div class="form-field">
                    <label for="client_concerns">Inquietudes</label>
                    <input id="client_concerns" name="client_concerns" type="text">
                  </div>
                  <label class="checkbox-field">
                    <input type="checkbox" name="client_approved" checked>
                    Activar alumno al crear
                  </label>
                  <button class="btn glass primary" type="submit">Crear alumno</button>
                </form>
              </div>
            </details>
          </div>

          <div class="admin-card glass-card">
            <details class="admin-collapsible admin-main-collapsible">
              <summary class="admin-collapsible-summary admin-main-summary">
                <div class="admin-collapsible-main">
                  <strong>Solicitudes de alumnos</strong>
                  <span>Revisar, aprobar, duplicar o eliminar</span>
                </div>
                <span class="admin-collapsible-tag">Listado</span>
              </summary>
              <div class="admin-collapsible-content">
                <ul class="admin-list">
                  {{APPLICATION_LIST}}
                </ul>
              </div>
            </details>
          </div>
        </div>
      </div>
    </main>
    <script src="/script.js?v=20260225-2"></script>
  </body>
</html>
